!function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r(r.s=10)}([function(e,t){e.exports=require("normalizr")},function(e,t){e.exports=require("react")},function(e,t){e.exports=require("redux-starter-kit")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("transliteration")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-router-dom")},function(e,t){e.exports=require("url-join")},function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),i=r(5),o=r.n(i),s=r(6),c=r.n(s),u=r(7),l=r(8),f=r(2),p=r(3),d=r(4),g=r(9),b=r.n(g),y=r(0),h=new y.schema.Entity("features"),v=(new y.schema.Entity("pages",{features:[h]}),new y.schema.Entity("paragraphs")),m=new y.schema.Entity("links"),j=new y.schema.Entity("avatars"),w=new y.schema.Entity("icons"),O=new y.schema.Entity("table_rows"),x=new y.schema.Entity("offers"),E=new y.schema.Entity("tables",{table_rows:[O]}),_=new y.schema.Entity("icon_blocks",{icons:[w]}),k=new y.schema.Entity("avatar_blocks",{avatars:[j]}),S=new y.schema.Entity("link_blocks",{links:[m]}),q=new y.schema.Entity("text_blocks",{paragraphs:[v]});new y.schema.Object({text_blocks:[{block:q}],link_blocks:[{block:S}],avatar_blocks:[{block:k}],icon_blocks:[{block:_}],table:[{table:E}],offer:[{offer:x}]});function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(r.push(o.value),!t||r.length!==t);n=!0);}catch(e){a=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function R(e,t){console.log(e,t[e].parent),t[e].parent!=e&&(t[t[e].parent].current=e,R(t[e].parent,t))}var C=Object(f.createSlice)({initialState:{isFetching:!1,isLoaded:!1,counter:1},reducers:{pageHeadersRequest:function(e,t){e.isFetching=!0},pageHeadersResponse:function(e,t){e.isFetching=!1,e.isLoaded=!0,e.start_tree={},e.pages=t.payload.entities.pages,console.log(e.pages),Object.entries(e.pages).forEach(function(t){var r=P(t,2),n=r[0],a=r[1];e.start_tree[n]={parent:a.parent},a.isFetching=!1,a.isLoaded=!1}),function(e){for(var t=0,r=Object.entries(e);t<r.length;t++){var n=P(r[t],2),a=n[0],i=n[1];e[i.parent].childs?e[i.parent].childs.push(a):(e[i.parent].childs=[],e[i.parent].childs[0]=a)}var o=e[0].childs.findIndex(function(e){return 0==e});e[0].childs.splice(o,o>=0?1:0)}(e.start_tree),console.log(e.start_tree),function e(t,r,n,a,i){if(console.log(i),r[t].childs){r[t].level=n,i[t].url=Object(d.slugify)(a);var o=!0,s=!1,c=void 0;try{for(var u,l=r[t].childs.values()[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var f=u.value;e(f,r,n+1,b()(a,Object(d.slugify)(i[f].url)),i)}}catch(e){s=!0,c=e}finally{try{o||null==l.return||l.return()}finally{if(s)throw c}}}else r[t].level=n,i[t].url=Object(d.slugify)(a)}(0,e.start_tree,0,"/",e.pages)},pageDetailRequest:function(e,t){e.pages[t.payload].isFetching=!0},pageDetailResponse:function(e,t){var r=t.payload.result.id;e.pages[r].isFetching=!1,e.pages[r].isLoaded=!0,Object.assign(e.pages[r],t.payload.result);for(var n=0,a=Object.entries(t.payload.entities);n<a.length;n++){var i=P(a[n],2),o=i[0],s=i[1];e[o]?Object.assign(e[o],s):e[o]=s}},setCurrentPage:function(e,t){var r=e.pages.find(function(e){return e.url===t.payload});e.currentPage=r?r.id:-1;for(var n=0,a=Object.entries(e.tree);n<a.length;n++){var i=P(a[n],2),o=i[0];i[1];e.tree[o].current=0}e.currentPage>=0&&R(e.currentPage,e.tree)},setCurrentHeaders:function(e,t){e.tree.map(function(e){return e.current=0}),e.currentPage>=0&&R(t.payload,e.tree)},setCounter:function(e,t){e.counter+=t.payload}}});var D=C.actions,F=(D.setCurrentPage,D.setCurrentHeaders,D.pageDetailRequest,D.pageDetailResponse,D.pageHeadersRequest,D.pageHeadersResponse,D.setCounter),H=C.reducer,T=function(){return a.a.createElement(p.Provider,{store:M},a.a.createElement(l.StaticRouter,null,a.a.createElement(L,null)))},M=Object(f.configureStore)({reducer:H,middleware:Object(f.getDefaultMiddleware)(),devTools:!0}),L=function(){Object(p.useDispatch)()(F(100));var e=Object(p.useSelector)(function(e){return e.counter});return a.a.createElement("div",null,"Имеем counter = ",e)},A=o()();A.use(c()()),A.use(o.a.static("public")),A.get("*",function(e,t,r){var n=Object(u.renderToString)(a.a.createElement(T,null));t.send('\n    <!DOCTYPE html>\n    <html>\n      <head>\n        <title>SSR with RR</title>\n      </head>\n\n      <body>\n        <div id="app">\n'.concat(n,"</div>\n      </body>\n    </html>\n  "))}),A.listen(3e3,function(){console.log("Server is listening on port: 3000")})}]);